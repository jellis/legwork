@import "mixins/forms";

// We use this to set the base for lots of form spacing and positioning styles
$form-spacing: 16px !default;

// We use these to style the labels in different ways
$form-label-pointer: pointer !default;
$form-label-font-size: $base-font-size !default;
$form-label-font-weight: normal !default;
$form-label-line-height: 1.5 !default;
$form-label-font-color: scale-color(#000, $lightness: 30%) !default;
$form-label-small-transform: capitalize !default;
$form-label-bottom-margin: 0 !default;
$input-font-family: inherit !default;
$input-font-color: rgba(0,0,0,0.75) !default;
$input-font-size: $base-font-size !default;
$input-bg-color: #FFF !default;
$input-focus-bg-color: scale-color(#FFF, $lightness: -2%) !default;
$input-border-color: scale-color(#FFF, $lightness: -20%) !default;
$input-focus-border-color: scale-color(#FFF, $lightness: -40%) !default;
$input-border-style: solid !default;
$input-border-width: 1px !default;
$input-border-radius: $global-radius !default;
$input-disabled-bg: #DDD !default;
$input-disabled-cursor: default !default;
$input-box-shadow: inset 0 1px 2px rgba(0,0,0,0.1) !default;
$input-include-glowing-effect: true !default;
$input-placeholder-font-color: #C1C1C1 !default;

// We use these to style the fieldset border and spacing.
$fieldset-border-style: solid !default;
$fieldset-border-width: 1px !default;
$fieldset-border-color: #DDD !default;
$fieldset-padding: 20px !default;
$fieldset-margin: 18px 0 !default;

// We use these to style the legends when you use them
$legend-bg: #FFF !default;
$legend-font-weight: bold !default;
$legend-padding: 0 3px !default;

// We use these to style the prefix and postfix input elements
$input-prefix-bg: scale-color(#FFF, $lightness: -5%) !default;
$input-prefix-border-color: scale-color(#FFF, $lightness: -20%) !default;
$input-prefix-border-size: 1px !default;
$input-prefix-border-type: solid !default;
$input-prefix-overflow: hidden !default;
$input-prefix-font-color: #333 !default;
$input-prefix-font-color-alt: #FFF !default;

// We use this setting to turn on/off HTML5 number spinners (the up/down arrows)
$input-number-spinners: true !default;

// We use these to style the error states for inputs and labels
$input-error-message-padding: 6px 9px 6px 9px !default;
$input-error-message-top: 0 !default;
$input-error-message-font-size: 80% !default;
$input-error-message-font-weight: normal !default;
$input-error-message-font-style: normal !default;
$input-error-message-font-color: #FFF !default;
$input-error-message-font-color-alt: #333 !default;

// We use this to style the glowing effect of inputs when focused
$glowing-effect-fade-time: 0.45s !default;
$glowing-effect-color: $input-focus-border-color !default;

// Select variables
$select-bg-color: #FFFFFF !default;
$select-hover-bg-color: scale-color($select-bg-color, $lightness: -3%) !default;

// All text inputs
$all-text-inputs: "input[type=\"text\"], input[type=\"password\"], input[type=\"date\"], input[type=\"datetime\"], input[type=\"datetime-local\"], input[type=\"month\"], input[type=\"week\"], input[type=\"email\"], input[type=\"number\"], input[type=\"search\"], input[type=\"tel\"], input[type=\"time\"], input[type=\"url\"], input[type=\"color\"]";

// Let's do this
@include exports("forms") {
    form { margin: 0 0 $form-spacing; }

    form .row { @include form-row-base; }

    label {
        @include form-label;
        &.right { @include form-label(right, false); }
        &.inline { @include form-label(inline, false); }

        small {
            text-transform: $form-label-small-transform;
            color: scale-color($form-label-font-color, $lightness: 15%);
        }
    }

    select::-ms-expand { display: none; }

    .prefix, .postfix { @include prefix-postfix-base; }

    .postfix.button, button.postfix { @include button-size(false, false); @include postfix(false, false, true); }
    .prefix.button, button.prefix { @include button-size(false, false); @include prefix(false, false, true); }

    .prefix.button.radius, button.prefix.radius { @include radius(0); @include side-radius($default-float, $button-radius); }
    .postfix.button.radius, button.postfix.radius { @include radius(0); @include side-radius($default-opposite, $button-radius); }
    .prefix.button.round, button.prefix.round { @include radius(0); @include side-radius($default-float, $button-round); }
    .postfix.button.round, button.postfix.round { @include radius(0); @include side-radius($default-opposite, $button-round); }

    span.prefix, label.prefix { @include prefix;
        &.radius { @include radius(0); @include side-radius($default-float, $global-radius); }
    }
    span.postfix, label.postfix { @include postfix;
        &.radius { @include radius(0); @include side-radius($default-opposite, $global-radius); }
    }

    /* We use this to get basic styling on all basic form elements */
    #{$all-text-inputs}, textarea {
        -webkit-appearance: none;
        -webkit-border-radius: 0px;
        @include form-element;
        @if $input-include-glowing-effect == false {
            @include single-transition(all, 0.15s, linear);
        }
        &.radius {
            @include radius($input-border-radius);
        }
    }

    form {
        .row {
            .prefix-radius.row.collapse {
                input, textarea, select { @include radius(0); @include side-radius($default-opposite, $button-radius); }
                .prefix { @include radius(0); @include side-radius($default-float, $button-radius); }
            }
            .postfix-radius.row.collapse {
                input, textarea, select { @include radius(0); @include side-radius($default-float, $button-radius); }
                .postfix { @include radius(0); @include side-radius($default-opposite, $button-radius); }
            }
            .prefix-round.row.collapse {
                input, textarea, select { @include radius(0); @include side-radius($default-opposite, $button-round); }
                .prefix { @include radius(0); @include side-radius($default-float, $button-round); }
            }
            .postfix-round.row.collapse {
                input, textarea, select { @include radius(0); @include side-radius($default-float, $button-round); }
                .postfix { @include radius(0); @include side-radius($default-opposite, $button-round); }
            }
        }
    }

    input[type="submit"] {
        -webkit-appearance: none;
        -webkit-border-radius: 0px;
    }

    textarea[rows] {
        height: auto;
    }
    textarea { resize: none; }

    select {
        @include form-select;
        @include block-glowing-effect(focus, $glowing-effect-fade-time, $glowing-effect-color);
        height: ($input-font-size + ($form-spacing * 1.5) - 1);
    }

    input[type="file"], input[type="checkbox"], input[type="radio"], select {
        margin: 0 0 $form-spacing 0;
    }

    input[type="checkbox"] + label, input[type="radio"] + label {
        display: inline-block;
        margin-#{$default-float}: $form-spacing * .5;
        margin-#{$default-opposite}: $form-spacing;
        margin-bottom: 0;
        vertical-align: baseline;
    }

    input[type="file"] {
        width: 100%;
    }

    input[type="number"] {
        @include html5number(moz, $input-number-spinners);
    }
    input[type="number"]::-webkit-inner-spin-button, input[type="number"]::-webkit-outer-spin-button {
        @include html5number(webkit, $input-number-spinners);
    }

    fieldset {
        @include fieldset;
    }

    span.error, small.error {
        @include form-error-message;
    }

    .error {
        input, textarea, select {
            margin-bottom: 0;
        }

        input[type="checkbox"], input[type="radio"] {
            margin-bottom: $form-spacing;
        }

        > label {
            @include form-label-error-color;
        }

        > small {
            @include form-error-message;
        }

        // > label {
        //     > small {
        //         color: scale-color($form-label-font-color, $lightness: 15%);
        //         background: transparent;
        //         padding: 0;
        //         text-transform: $form-label-small-transform;
        //         font-style: normal;
        //         font-size: 70%;
        //         margin: 0;
        //         display: inline;
        //     }
        // }

        span.error-message {
            display: block;
        }

        // Removes the radius on the bottom of the inputs
        #{$all-text-inputs}, select {
            &.radius {
                @include radius(0); @include side-radius($side:top);
            }
            border: 1px solid $alert-color;
        }
    }

    input.error, textarea.error, select.error {
        margin-bottom: 0;
    }

    label.error { @include form-label-error-color; }

    // Styling for placeholders
    #{$all-text-inputs}, textarea {
        @include placeholder-styling;
    }
}

